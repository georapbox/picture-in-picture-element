var t,e,i,n;function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function o(t,e){return e.get?e.get.call(t):e.value}function r(t,e){return o(t,s(t,e,"get"))}function c(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(t,e,i){c(t,e),e.set(t,i)}function u(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function a(t,e){c(t,e),e.add(t)}t={},e="PictureInPicture",i=function(){return g},Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0});const h=document.createElement("template");h.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      position: relative;\n    }\n    :host([hidden]),\n    [hidden],\n    :host(:empty) {\n      display: none !important;\n    }\n    .pip-button {\n      position: absolute;\n      top: 0.5rem;\n      right: 0.5rem;\n    }\n  </style>\n\n  <slot id="videoSlot"></slot>\n\n  <button type="button" part="pip-button" class="pip-button" hidden disabled>\n    <slot name="pip-button-label">Picture-in-Picture</slot>\n  </button>\n';var p=new WeakSet,d=new WeakSet,b=new WeakSet,m=new WeakMap,v=new WeakMap,w=new WeakMap,E=new WeakMap,f=new WeakSet;class g extends HTMLElement{static get observedAttributes(){return["pip-button-title"]}attributeChangedCallback(t,e,i){if("pip-button-title"===t&&e!==i){const t=u(this,p,P).call(this);i?t?.setAttribute("title",i):t?.removeAttribute("title")}}get pipButtonTitle(){return this.getAttribute("pip-button-title")}set pipButtonTitle(t){this.setAttribute("pip-button-title",t)}connectedCallback(){u(this,f,C).call(this,"pipButtonTitle");const t=u(this,p,P).call(this),e=u(this,d,y).call(this);t?.addEventListener("click",r(this,E)),e?.addEventListener("slotchange",r(this,m))}disconnectedCallback(){const t=u(this,p,P).call(this),e=u(this,d,y).call(this),i=u(this,b,k).call(this);t?.removeEventListener("click",r(this,E)),e?.removeEventListener("slotchange",r(this,m)),i?.removeEventListener("enterpictureinpicture",r(this,v)),i?.removeEventListener("leavepictureinpicture",r(this,w))}static defineCustomElement(t="picture-in-picture"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,g)}constructor(){super(),a(this,p),a(this,d),a(this,b),a(this,f),l(this,m,{writable:!0,value:()=>{const t=u(this,p,P).call(this),e=u(this,b,k).call(this);"pictureInPictureEnabled"in document&&e?(t.hidden=!1,t.disabled=!1,e.addEventListener("enterpictureinpicture",r(this,v)),e.addEventListener("leavepictureinpicture",r(this,w))):(t.hidden=!0,t.disabled=!0)}}),l(this,v,{writable:!0,value:()=>{this.dispatchEvent(new CustomEvent("picture-in-picture:enter",{bubbles:!0,composed:!0,detail:{videoElement:u(this,b,k).call(this),pipButton:u(this,p,P).call(this)}}))}}),l(this,w,{writable:!0,value:()=>{this.dispatchEvent(new CustomEvent("picture-in-picture:leave",{bubbles:!0,composed:!0,detail:{videoElement:u(this,b,k).call(this),pipButton:u(this,p,P).call(this)}}))}}),l(this,E,{writable:!0,value:()=>{if(!("pictureInPictureEnabled"in document))return;const t=u(this,b,k).call(this);document.pictureInPictureElement?document.exitPictureInPicture().catch((t=>{this.dispatchEvent(new CustomEvent("picture-in-picture:error",{bubbles:!0,composed:!0,detail:{error:t}}))})):!document.pictureInPictureElement&&document.pictureInPictureEnabled&&t?.requestPictureInPicture().then((t=>{t.onresize=t=>{const{width:e,height:i}=t.currentTarget;this.dispatchEvent(new CustomEvent("picture-in-picture:resize",{bubbles:!0,composed:!0,detail:{width:e,height:i}}))}})).catch((t=>{this.dispatchEvent(new CustomEvent("picture-in-picture:error",{bubbles:!0,composed:!0,detail:{error:t}}))}))}}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(h.content.cloneNode(!0)))}}function P(){return this.shadowRoot.querySelector(".pip-button")}function y(){return this.shadowRoot.getElementById("videoSlot")}function k(){const t=u(this,d,y).call(this);return t&&t.assignedElements({flatten:!0}).find((t=>"VIDEO"===t.nodeName))||null}function C(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}g.defineCustomElement();export{g as PictureInPicture};
//# sourceMappingURL=picture-in-picture-defined.js.map
